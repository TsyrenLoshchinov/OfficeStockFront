<main class="main">
  <div class="main__container">
    <h1 class="main__title">Чеки</h1>

    <div class="actions">
      <app-custom-dropdown [options]="sortOptions" [selectedValue]="sortOrder()" (valueChange)="onSortChange($event)">
      </app-custom-dropdown>
      <button class="clear-all" type="button" (click)="clearAll()">Очистить всё</button>
    </div>

    <div class="checks" *ngIf="!isLoading(); else loadingTemplate">
      <div class="check-card" *ngFor="let cheque of sortedCheques()">
        <div class="leftElemnts">
          <h2 class="check-card-title">Чек №{{ cheque.number }} от {{ formatDate(cheque.date) }}</h2>
          <div class="check-card-info">
            <p class="check-file-name">Файл: {{ cheque.fileName }}</p>
            <p class="check-upload-date">Загружен: {{ formatDate(cheque.uploadedAt) }}</p>
          </div>
        </div>
        <div class="RightsBts">
          <button class="cross" aria-label="Закрыть чек" (click)="deleteCheque(cheque.id)"></button>
          <button class="more-btn" (click)="viewDetails(cheque.id)">Подробнее</button>
        </div>
      </div>

      <div *ngIf="sortedCheques().length === 0" class="empty-state">
        <p>Нет загруженных чеков</p>
      </div>
    </div>

    <ng-template #loadingTemplate>
      <div class="loading-state">
        <p>Загрузка чеков...</p>
      </div>
    </ng-template>
  </div>

  <!-- Модальное окно с информацией о чеке (только для чтения) -->
  <app-receipt-modal *ngIf="showModal() && selectedCheque" [receiptData]="selectedCheque" [isReadOnly]="true"
    (closed)="closeModal()">
  </app-receipt-modal>
</main>