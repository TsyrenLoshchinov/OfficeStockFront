<div class="main__container">
  <div class="page-header">
    <h1 class="main__title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h1>
    <span class="unread-badge" *ngIf="unreadCount() > 0">{{ unreadCount() }} –Ω–æ–≤—ã—Ö</span>
  </div>

  <div class="actions">
    <app-custom-dropdown [options]="filterOptions" [selectedValue]="filterType()" [width]="'299px'" [height]="'44px'"
      [menuLeft]="'73px'" [menuTop]="'52px'" [menuWidth]="'212px'" (valueChange)="onFilterChange($event)">
    </app-custom-dropdown>

    <button class="clear-all" type="button" (click)="clearAll()" [disabled]="notifications().length === 0">
      –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
    </button>
  </div>

  <div class="notifications" *ngIf="!isLoading(); else loadingTemplate">
    <article class="notification-card" [class.unread]="!notification.isRead" [ngClass]="getTypeClass(notification.type)"
      *ngFor="let notification of filteredNotifications()" (click)="markAsRead(notification)">

      <div class="notification-card__icon">{{ getTypeIcon(notification.type) }}</div>

      <div class="notification-card__content">
        <div class="notification-card__header">
          <div class="notification-card__title">{{ notification.title }}</div>
          <span class="notification-card__type-badge" [class]="'badge-' + notification.type">
            {{ notification.type === 'info' ? '–ò–Ω—Ñ–æ' :
            notification.type === 'warning' ? '–í–Ω–∏–º–∞–Ω–∏–µ' :
            notification.type === 'success' ? '–£—Å–ø–µ—Ö' : '–û—à–∏–±–∫–∞' }}
          </span>
        </div>
        <p class="notification-card__text" [class.unread]="!notification.isRead">
          {{ notification.message }}
        </p>
        <time class="notification-card__date" [attr.datetime]="notification.timestamp">
          {{ formatDate(notification.timestamp) }}
        </time>
      </div>

      <button class="notification-card__close" aria-label="–ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
        (click)="deleteNotification(notification.id); $event.stopPropagation()">
      </button>
    </article>

    <div *ngIf="filteredNotifications().length === 0" class="empty-state">
      <div class="empty-state__icon">üîî</div>
      <p>–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
    </div>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-state">
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...</p>
    </div>
  </ng-template>
</div>