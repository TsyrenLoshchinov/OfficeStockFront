<div class="modal-overlay" *ngIf="isVisible" appModalContainer (click)="onOverlayClick($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-container">
      <button class="modal-close" (click)="close()" aria-label="Закрыть" type="button">
        <span class="close-line"></span>
        <span class="close-line"></span>
      </button>

      <h1 class="modal-title">Новое правило списания</h1>

      <div class="input-field">
        <input
          type="text"
          class="input-field__input"
          id="search-input"
          placeholder=" "
          autocomplete="off"
          [value]="searchQuery()"
          (input)="onSearchChange($any($event.target).value)"
          (focus)="showDropdown.set(true)"
          (blur)="onInputBlur()"
        />
        <label for="search-input" class="input-field__label">Поиск</label>
        <div class="input-field__line"></div>
        <div class="dropdown-list" [class.dropdown-list--visible]="showDropdown()">
          <div
            class="dropdown-list__item"
            *ngFor="let item of filteredItems()"
            (click)="onItemClick(item)"
          >
            {{ item.name }}
          </div>
        </div>
      </div>

      <div class="frequency-section">
        <span class="frequency-label">Списывать раз в</span>
        <div class="frequency-input-wrapper">
          <input
            type="number"
            class="frequency-input"
            [value]="frequency()"
            (input)="onFrequencyChange(+$any($event.target).value)"
            min="1"
          />
        </div>
        <span class="frequency-unit">дня</span>
      </div>

      <div class="modal-footer">
        <button
          class="confirm-button"
          [disabled]="isConfirmButtonDisabled()"
          (click)="createRule()"
          type="button"
        >
          {{ isSubmitting() ? 'Создание...' : 'Подтвердить' }}
        </button>
      </div>
    </div>
  </div>
</div>

